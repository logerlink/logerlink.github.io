<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
        <link rel="stylesheet" type="text/css" href="../../css/base.css"></link>
        <meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
        <title>Linux整理</title>
        <meta name="description" content="Linux整理">
        <link href='../../css/family.css' rel='stylesheet' type='text/css' />
        <script src="../../js/base.js" type="module"></script>
    </head>
    <body>
        <div class="container">
            <div class="col-left">
                <div class="wave"></div>
                <div class="category">
                </div>
            </div>
            <div class="col-right">
                <article>
                    <header>
                        <h1 class="title">
                            Linux整理
                        </h1>
                        <div class="dateTime">
                            2021-02-19
                        </div>
                    </header>
                    <hr/>
                    <div class="content">
<div class='typora-export os-windows' >
<div id='write'  class=''>
    <div class='md-toc' mdtype='toc' style="height: 700px;position: fixed;z-index: 999;right: 0;bottom:20px;overflow-y: scroll;">
        <a href="./Linux.xmind" target="_blank">Linux.xmind思维导图</a><a href="./Linux.pdf" target="_blank" style="margin: 20px;">Linux.pdf</a>
        <p class="md-toc-content" role="list"><!--<span role="listitem" class="md-toc-item md-toc-h1" data-ref="n1416"><a class="md-toc-inner" href="#linux">Linux</a></span>--><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n2"><a class="md-toc-inner" href="#基础指令">基础指令</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n3"><a class="md-toc-inner" href="#安装">安装</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n4"><a class="md-toc-inner" href="#ls">ls</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n18"><a class="md-toc-inner" href="#pwd">pwd</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n25"><a class="md-toc-inner" href="#cd">cd</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n35"><a class="md-toc-inner" href="#mkdir">mkdir</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n50"><a class="md-toc-inner" href="#touch">touch</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n57"><a class="md-toc-inner" href="#cp">cp</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n67"><a class="md-toc-inner" href="#mv">mv</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n74"><a class="md-toc-inner" href="#rm">rm</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n86"><a class="md-toc-inner" href="#vim">vim</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n93"><a class="md-toc-inner" href="#重定向">重定向</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n105"><a class="md-toc-inner" href="#cat">cat</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n117"><a class="md-toc-inner" href="#进阶指令">进阶指令</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n118"><a class="md-toc-inner" href="#df">df</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n128"><a class="md-toc-inner" href="#free">free</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n140"><a class="md-toc-inner" href="#head">head</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n147"><a class="md-toc-inner" href="#tail">tail</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n154"><a class="md-toc-inner" href="#less">less</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n161"><a class="md-toc-inner" href="#wc">wc</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n172"><a class="md-toc-inner" href="#date">date</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n188"><a class="md-toc-inner" href="#cal">cal</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n200"><a class="md-toc-inner" href="#clear-ctrl--l">clear /ctrl + L</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n204"><a class="md-toc-inner" href="#">|</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n211"><a class="md-toc-inner" href="#高级指令">高级指令</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n212"><a class="md-toc-inner" href="#hostname">hostname</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n222"><a class="md-toc-inner" href="#id">id</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n234"><a class="md-toc-inner" href="#whoami">whoami</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n241"><a class="md-toc-inner" href="#ps">ps</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n259"><a class="md-toc-inner" href="#top">top</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n279"><a class="md-toc-inner" href="#du">du</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n291"><a class="md-toc-inner" href="#find">find</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n303"><a class="md-toc-inner" href="#service">service</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n310"><a class="md-toc-inner" href="#kill">kill</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n317"><a class="md-toc-inner" href="#killall">killall</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n324"><a class="md-toc-inner" href="#ifconfig">ifconfig</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n338"><a class="md-toc-inner" href="#reboot">reboot</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n348"><a class="md-toc-inner" href="#shutdown">shutdown</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n377"><a class="md-toc-inner" href="#uptime">uptime</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n384"><a class="md-toc-inner" href="#uname">uname</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n394"><a class="md-toc-inner" href="#netstat">netstat</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n410"><a class="md-toc-inner" href="#man">man</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n417"><a class="md-toc-inner" href="#vim-n417">vim</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n418"><a class="md-toc-inner" href="#打开方式">打开方式</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n440"><a class="md-toc-inner" href="#退出方式">退出方式</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n462"><a class="md-toc-inner" href="#命令模式打开文件后默认进入的模式）">命令模式（打开文件后默认进入的模式）</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n569"><a class="md-toc-inner" href="#编辑模式输入模式）按ia等进入">编辑模式（输入模式）按i、a等进入</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n583"><a class="md-toc-inner" href="#末尾）行模式--输入或进入">末（尾）行模式  输入：或/进入</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n696"><a class="md-toc-inner" href="#扩展">扩展</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n754"><a class="md-toc-inner" href="#自有服务1）">自有服务（1）</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n755"><a class="md-toc-inner" href="#运行模式运行级别）">运行模式（运行级别）</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n816"><a class="md-toc-inner" href="#用户和用户组">用户和用户组</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n817"><a class="md-toc-inner" href="#注意">注意</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n827"><a class="md-toc-inner" href="#用户操作">用户操作</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n893"><a class="md-toc-inner" href="#用户组操作">用户组操作</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n917"><a class="md-toc-inner" href="#网络设置">网络设置</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n918"><a class="md-toc-inner" href="#网卡配置文件路径">网卡配置文件路径</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n929"><a class="md-toc-inner" href="#重启所有网卡">重启所有网卡</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n935"><a class="md-toc-inner" href="#扩展-n935">扩展</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n955"><a class="md-toc-inner" href="#ssh服务">SSH服务</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n956"><a class="md-toc-inner" href="#服务启动停止重启">服务启动/停止/重启</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n964"><a class="md-toc-inner" href="#远程终端">远程终端 </a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n972"><a class="md-toc-inner" href="#文件传输">文件传输</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n976"><a class="md-toc-inner" href="#自有服务2">自有服务2</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n977"><a class="md-toc-inner" href="#hostname-n977">#hostname</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1008"><a class="md-toc-inner" href="#chkconfig">#chkconfig </a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1038"><a class="md-toc-inner" href="#ntp服务">ntp服务</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1064"><a class="md-toc-inner" href="#防火墙服务">防火墙服务</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1166"><a class="md-toc-inner" href="#rpm管理">rpm管理</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1220"><a class="md-toc-inner" href="#croncrontab计划任务">cron/crontab计划任务</a></span><span role="listitem" class="md-toc-item md-toc-h2" data-ref="n1253"><a class="md-toc-inner" href="#权限管理">权限管理</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1254"><a class="md-toc-inner" href="#概述">概述</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1290"><a class="md-toc-inner" href="#身份">身份</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1312"><a class="md-toc-inner" href="#chmod-选项-权限模式-文档">#chmod 【选项】 权限模式 文档</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1357"><a class="md-toc-inner" href="#属主和属组的设置">属主和属组的设置</a></span><span role="listitem" class="md-toc-item md-toc-h3" data-ref="n1379"><a class="md-toc-inner" href="#sudo">sudo</a></span></p></div>
    <!-- <h1><a name="linux" class="md-header-anchor"></a><span>Linux</span></h1> -->
    <h2><a name="基础指令" class="md-header-anchor"></a><span>基础指令</span></h2><h3><a name="安装" class="md-header-anchor"></a><span>安装</span></h3><h3><a name="ls" class="md-header-anchor"></a><span>ls</span></h3><ul><li><p><span>#ls [选项] 路径</span></p><ul><li><p><span>列出目录</span></p><ul><li><span>-a 显示所有的文档（包含隐藏）</span></li><li><span>-h 可读性较高的形式</span></li><li><span>-l 详细列表</span></li></ul></li></ul></li></ul><h3><a name="pwd" class="md-header-anchor"></a><span>pwd</span></h3><ul><li><p><span>#pwd</span></p><ul><li><span>打印当前工作目录</span></li></ul></li></ul><h3><a name="cd" class="md-header-anchor"></a><span>cd</span></h3><ul><li><p><span>#cd 【路径】</span></p><ul><li><p><span>进入目录</span></p><ul><li><span>~为当前登录用户的家目录，不写路径也会进到当前用户的家目录</span></li></ul></li></ul></li></ul><h3><a name="mkdir" class="md-header-anchor"></a><span>mkdir</span></h3><ul><li><p><span>#mkdir [选项] 路径 [路径1 路径2]</span></p><ul><li><p><span>创建目录</span></p><ul><li><p><span>-p 一次性创建不存在的目录</span></p><ul><li><span>#mkdir -p a/b/c/d</span></li><li><span>#mkdir dir1 dir2 dir3</span></li></ul></li></ul></li></ul></li></ul><h3><a name="touch" class="md-header-anchor"></a><span>touch</span></h3><ul><li><p><span>#touch 文件名称1 【文件名称2】</span></p><ul><li><span>创建【多个】文件</span></li></ul></li></ul><h3><a name="cp" class="md-header-anchor"></a><span>cp</span></h3><ul><li><p><span>#cp [选项] 被复制的文档路径 文档被复制到的路径</span></p><ul><li><p><span>复制文件</span></p><ul><li><span>-r 递归复制</span></li></ul></li></ul></li></ul><h3><a name="mv" class="md-header-anchor"></a><span>mv</span></h3><ul><li><p><span>#mv 【选项】需要移动的文档路径 文档被移动到的位置</span></p><ul><li><span>移动、剪切、重命名</span></li></ul></li></ul><h3><a name="rm" class="md-header-anchor"></a><span>rm</span></h3><ul><li><p><span>#rm 【选项】路径（可通配符）</span></p><ul><li><p><span>删除</span></p><ul><li><span>-f force强制删除 无提示</span></li><li><span>-r 递归删除</span></li></ul></li></ul></li></ul><h3><a name="vim" class="md-header-anchor"></a><span>vim</span></h3><ul><li><p><span>#vim 文件路径</span></p><ul><li><span>打开一个文件</span></li></ul></li></ul><h3><a name="重定向" class="md-header-anchor"></a><span>重定向</span></h3><ul><li><p><span>指令 &gt; 路径</span></p><ul><li><span>覆盖输出</span></li></ul></li><li><p><span>指令 &gt;&gt; 路径</span></p><ul><li><span>追加输出</span></li></ul></li></ul><h3><a name="cat" class="md-header-anchor"></a><span>cat</span></h3><ul><li><p><span>#cat 文件路径</span></p><ul><li><span>查看文件</span></li></ul></li><li><p><span>#cat 路径1 路径2 &gt; 合并之后路径</span></p><ul><li><span>合并文件并输出到某路径</span></li></ul></li></ul><h2><a name="进阶指令" class="md-header-anchor"></a><span>进阶指令</span></h2><h3><a name="df" class="md-header-anchor"></a><span>df</span></h3><ul><li><p><span>#df 【选项】</span></p><ul><li><p><span>查看磁盘空间</span></p><ul><li><span>-h 可读性较高的形式</span></li></ul></li></ul></li></ul><h3><a name="free" class="md-header-anchor"></a><span>free</span></h3><ul><li><p><span>#free 【选项】</span></p><ul><li><p><span>查看内存使用情况</span></p><ul><li><span>-m 以mb单位查看（推荐）</span></li><li><span>-g 以g单位查看</span></li></ul></li></ul></li></ul><h3><a name="head" class="md-header-anchor"></a><span>head</span></h3><ul><li><h1><a name="head--n-文件路径" class="md-header-anchor"></a><span>head -n 文件路径</span></h1><ul><li><span>查看文件前n行【n为数字】</span></li></ul></li></ul><h3><a name="tail" class="md-header-anchor"></a><span>tail</span></h3><ul><li><h1><a name="tail--n-文件路径" class="md-header-anchor"></a><span>tail -n 文件路径</span></h1><ul><li><span>查看文件末n行【n为数字】、用于查看日志或配置居多</span></li></ul></li></ul><h3><a name="less" class="md-header-anchor"></a><span>less</span></h3><ul><li><p><span>#less 路径</span></p><ul><li><span>以较少内容查看 ，辅助功能键（数字+回车、空格键+上下方向键），q退出</span></li></ul></li></ul><h3><a name="wc" class="md-header-anchor"></a><span>wc</span></h3><ul><li><p><span>#wc 【选项】统计文件路径</span></p><ul><li><span>-l lines 行数</span></li><li><span>-w words 单词数（按照空格拆分）</span></li><li><span>-c bytes 字节数</span></li></ul></li></ul><h3><a name="date" class="md-header-anchor"></a><span>date</span></h3><ul><li><p><span>#date</span></p><ul><li><p><span>时间读取 默认2018年 3月 24日 星期六 15:54:28</span></p><ul><li><span>+%F 2018-03-24</span></li><li><span>%T 16:01:00</span></li><li><span>“+%F %T” 等价于 “+%Y-%m-%d %H:%M:%S”</span></li><li><span>-d  “-1 day”  “+%F %T”  获取之前或者之后的某个时间</span></li></ul></li></ul></li></ul><h3><a name="cal" class="md-header-anchor"></a><span>cal</span></h3><ul><li><p><span>#cal</span></p><ul><li><p><span>直接输出当前月份日历 等价于 #cal 1</span></p><ul><li><span>#cal 3 输出上月+本月+下月的日历</span></li><li><span>cal -y 年份 输出某一个年份的日历</span></li></ul></li></ul></li></ul><h3><a name="clear-ctrl--l" class="md-header-anchor"></a><span>clear /ctrl + L</span></h3><ul><li><span>清控制台</span></li></ul><h3><a name="" class="md-header-anchor"></a><span>|</span></h3><ul><li><p><span>指令 | grep 关键词</span></p><ul><li><span>过滤，不能单独使用，需要配合前面的指令一起使用，辅助作用</span></li></ul></li></ul><h2><a name="高级指令" class="md-header-anchor"></a><span>高级指令</span></h2><h3><a name="hostname" class="md-header-anchor"></a><span>hostname</span></h3><ul><li><p><span>#hostname [-f]</span></p><ul><li><p><span>读取主机名，也可设置，不过是临时性的切换用户后生效，重启后失效</span></p><ul><li><span>-f 输出当前主机名中的FQDN（全限定域名）</span></li></ul></li></ul></li></ul><h3><a name="id" class="md-header-anchor"></a><span>id</span></h3><ul><li><p><span>#id [用户名]</span></p><ul><li><p><span>查看用户的基本信息（用户id，组id，附加组id），可不指定用户，默认为当前用户</span></p><ul><li><span>验证用户信息：通过文件/etc/passwd</span></li><li><span>验证用户组信息：通过文件/etc/group</span></li></ul></li></ul></li></ul><h3><a name="whoami" class="md-header-anchor"></a><span>whoami</span></h3><ul><li><p><span>#whoami</span></p><ul><li><span>显示当前登录的用户名</span></li></ul></li></ul><h3><a name="ps" class="md-header-anchor"></a><span>ps</span></h3><ul><li><p><span>#ps -ef | grep 关键词</span></p><ul><li><p><span>查看服务器的进程信息</span></p><ul><li><p><span>-e 列出所有进程</span></p><ul><li><span>UID：该进程执行的用户id；</span>
<span>PID：进程id；</span>
<span>PPID：该进程的父级进程id，如果一个程序的父级进程找不到，该程序的进程称之为僵尸进程（parent process ID）；</span></li></ul></li><li><p><span>-f 显示所有字段</span></p><ul><li><span>C：Cpu的占用率，其形式是百分数；</span>
<span>STIME：进行的启动时间；</span>
<span>TTY：终端设备，发起该进程的设备识别符号，如果显示“?”则表示该进程并不是由终端设备发起；</span>
<span>TIME：进程的执行时间；</span>
<span>CMD：该进程的名称或者对应的路径；</span></li></ul></li></ul></li></ul></li></ul><h3><a name="top" class="md-header-anchor"></a><span>top</span></h3><ul><li><p><span>#top</span></p><ul><li><p><span>查看服务器进程所占用的资源，按q退出</span></p><ul><li><p><span>快捷键 m 按内存从高到低降序排列</span></p><ul><li><span>PID：进程id；</span>
<span>USER：该进程对应的用户；</span>
<span>PR：优先级；</span>
<span>VIRT：虚拟内存；</span>
<span>RES：常驻内存；</span>
<span>SHR：共享内存  计算一个进程实际使用的内存 = 常驻内存（RES）- 共享内存（SHR）</span></li></ul></li><li><p><span>快捷键 p cpu 从高到低排</span></p><ul><li><span>S：表示进程的状态status（sleeping，其中S表示睡眠，R表示运行）；</span>
<span>%CPU：表示CPU的占用百分比；</span>
<span>%MEM：表示内存的占用百分比；</span>
<span>TIME+：执行的时间；</span>
<span>COMMAND：进程的名称或者路径；</span></li></ul></li><li><p><span>当服务器拥有多个cpu的时候可以使用“1”快捷键来切换是否展示显示各个cpu的详细信息</span></p></li></ul></li></ul></li></ul><h3><a name="du" class="md-header-anchor"></a><span>du</span></h3><ul><li><p><span>#du 【选项】目录路径</span></p><ul><li><p><span>查看目录的真实大小</span></p><ul><li><span>-s summaries 汇总大小</span></li><li><span>-h 可读性较高</span></li></ul></li></ul></li></ul><h3><a name="find" class="md-header-anchor"></a><span>find</span></h3><ul><li><p><span>#find 路径范围  【选项】【选项值】</span></p><ul><li><p><span>查找文件</span></p><ul><li><span>-name 文档名称 可通配符 </span></li><li><span>type f表示文件 d表示文件夹</span></li></ul></li></ul></li></ul><h3><a name="service" class="md-header-anchor"></a><span>service</span></h3><ul><li><p><span>#service  服务名 start/stop/restart</span></p><ul><li><span>控制服务的启动/停止/重启</span></li></ul></li></ul><h3><a name="kill" class="md-header-anchor"></a><span>kill</span></h3><ul><li><p><span>#kill 进程pid</span></p><ul><li><span>结束进程</span></li></ul></li></ul><h3><a name="killall" class="md-header-anchor"></a><span>killall</span></h3><ul><li><p><span>#killall 进程名称</span></p><ul><li><span>结束进程</span></li></ul></li></ul><h3><a name="ifconfig" class="md-header-anchor"></a><span>ifconfig</span></h3><ul><li><p><span>#ifconfig</span></p><ul><li><p><span>获取网卡信息，inet addr就是网卡的ip地址</span></p><ul><li><span>eth0 网卡名称</span></li><li><span>lo loop 本地回还网卡 ip一般为127.0.0.1，网卡名称</span></li><li><span>当服务器拥有多个cpu的时候可以使用“1”快捷键来切换是否展示显示各个cpu的详细信息</span></li></ul></li></ul></li></ul><h3><a name="reboot" class="md-header-anchor"></a><span>reboot</span></h3><ul><li><p><span>#reboot</span></p><ul><li><p><span>重启</span></p><ul><li><span>-w 模拟重启，但不重启（只写关机和开机日志信息）</span></li></ul></li></ul></li></ul><h3><a name="shutdown" class="md-header-anchor"></a><span>shutdown</span></h3><ul><li><p><span>#shutdowm  【选项】 </span></p><ul><li><p><span>关机（慎用）</span></p><ul><li><p><span>-h 小时</span></p><ul><li><span>#shutdown -h 12:10 &quot;系统计划在12:10&quot;关机</span></li></ul></li><li><p><span>取消计划关机</span></p><ul><li><span>7.x- ctrl + c</span></li><li><span>7.x+ shutdown -c</span></li></ul></li><li><p><span>拓展</span></p><ul><li><span>poweroff</span></li><li><span>init 0</span></li><li><span>halt</span></li></ul></li></ul></li></ul></li></ul><h3><a name="uptime" class="md-header-anchor"></a><span>uptime</span></h3><ul><li><p><span>#uptime</span></p><ul><li><span>输出计算机持续在线时间（开机到现在）</span></li></ul></li></ul><h3><a name="uname" class="md-header-anchor"></a><span>uname</span></h3><ul><li><p><span>#uname 【选项】</span></p><ul><li><p><span>获取计算机操作系统相关信息</span></p><ul><li><span>-a all 获取全部的系统信息（类型、全部主机名、内核版本、发布时间、开源计划）</span></li></ul></li></ul></li></ul><h3><a name="netstat" class="md-header-anchor"></a><span>netstat</span></h3><ul><li><p><span>#netstat -tnlp</span></p><ul><li><p><span>查看网络连接状态</span></p><ul><li><span>-t 列出tcp协议的链接</span></li><li><span>-n 字母组合转化成ip地址，将协议转换成端口号显示</span></li><li><span>-l 过滤出“state（状态）”列中其值为LISTEN（监听）的连接</span></li><li><span>-p 显示发起连接的进程pid和进程名称</span></li></ul></li></ul></li></ul><h3><a name="man" class="md-header-anchor"></a><span>man</span></h3><ul><li><p><span>#man 命令</span></p><ul><li><span>manual 查看手册 按q退出</span></li></ul></li></ul><h2><a name="vim-n417" class="md-header-anchor"></a><span>vim</span></h2><h3><a name="打开方式" class="md-header-anchor"></a><span>打开方式</span></h3><ul><li><p><span>vim 路径</span></p><ul><li><span>打开指定文件</span></li></ul></li><li><p><span>vim +数字 路径</span></p><ul><li><span>打开指定文件，将光标移动到指定行</span></li></ul></li><li><p><span>vim +/关键词 路径</span></p><ul><li><span>打开指定文件，高亮显示关键词</span></li></ul></li><li><p><span>vim 路径1 路径2</span></p><ul><li><span>同时打开多个文件</span></li></ul></li></ul><h3><a name="退出方式" class="md-header-anchor"></a><span>退出方式</span></h3><ul><li><p><span>:wq</span></p><ul><li><span>保存并退出</span></li></ul></li><li><p><span>:q</span></p><ul><li><span>退出</span></li></ul></li><li><p><span>:q!</span></p><ul><li><span>不保存直接退出</span></li></ul></li><li><p><span>:x</span></p><ul><li><span>子主题 1</span></li></ul></li></ul><h3><a name="命令模式打开文件后默认进入的模式）" class="md-header-anchor"></a><span>命令模式（打开文件后默认进入的模式）</span></h3><ul><li><p><span>不能对文件直接编辑，可通过快捷键标记文件（删除行、复制行、移动光标、粘贴等）</span></p></li><li><p><span>光标移动</span></p><ul><li><p><span>shift +^</span></p><ul><li><span>行首</span></li></ul></li><li><p><span>shift + $</span></p><ul><li><span>行尾</span></li></ul></li><li><p><span>gg</span></p><ul><li><span>移动到首行</span></li></ul></li><li><p><span>G</span></p><ul><li><p><span>移动到末行</span></p></li><li><p><span>数字 G</span></p><ul><li><span>快速移动到指定行</span></li></ul></li></ul></li><li><p><span>数字 ↑/数字 ↓ </span></p><ul><li><span>以当前光标为准向上/向下移动n行</span></li></ul></li><li><p><span>数字 ←/数字 → </span></p><ul><li><span>以当前光标为准向左/向右移动n字符</span></li></ul></li><li><p><span>:n</span></p><ul><li><span>末行模式下 快速移到n行</span></li></ul></li><li><p><span>ctrl + b或者PgUp</span></p><ul><li><span>上一页</span></li></ul></li><li><p><span>ctrl + f 或者PgDw</span></p><ul><li><span>下一页</span></li></ul></li></ul></li><li><p><span>复制/粘贴/删除</span></p><ul><li><p><span>yy</span></p><ul><li><span>复制所在行</span></li><li><span>数值 yy 以光标所在行为准（包括该行）向下复制指定行数</span></li></ul></li><li><p><span>可视化复制</span></p><ul><li><p><span>子主题 1</span></p><ul><li><span>按键：ctrl + v（可视块）或V（可视行）或v（可视），然后按下↑↓←→方向键来选中需要复制的区块，按下y键进行复制</span></li></ul></li></ul></li><li><p><span>p</span></p><ul><li><span>粘贴</span></li></ul></li><li><p><span>dd</span></p><ul><li><span>剪切/删除所在行</span></li><li><span>数字 dd  以光标所在行为准（包括该行）向下剪切指定行数</span></li></ul></li><li><p><span>D</span></p><ul><li><span>删除所在行数据，下面的数据不会上移</span></li></ul></li><li><p><span>可视化删除</span></p><ul><li><span>按键：ctrl + v（可视块）或V（可视行）或v（可视），上下左右移动，按下D表示删除选中行，d表示删选中块</span></li></ul></li><li><p><span>u 或 :u（末行模式）</span></p><ul><li><span>撤销</span></li></ul></li><li><p><span>ctrl + r</span></p><ul><li><span>恢复</span></li></ul></li></ul></li></ul><h3><a name="编辑模式输入模式）按ia等进入" class="md-header-anchor"></a><span>编辑模式（输入模式）按i、a等进入</span></h3><ul><li><p><span>有多个命令  只介绍i，a</span></p></li><li><p><span>i</span></p><ul><li><span>在光标所在字符前开始插入</span></li></ul></li><li><p><span>a</span></p><ul><li><span>在光标所在字符后开始插入</span></li></ul></li></ul><h3><a name="末尾）行模式--输入或进入" class="md-header-anchor"></a><span>末（尾）行模式  输入：或/进入</span></h3><ul><li><p><span>退出方式</span></p><ul><li><span>按下esc</span></li><li><span>连按两次esc</span></li><li><span>删除末行全部输入字符</span></li></ul></li><li><p><span>保存/退出</span></p><ul><li><p><span>:w</span></p><ul><li><p><span>保存文件</span></p></li><li><p><span>:w 路径</span></p><ul><li><span>另存为</span></li></ul></li></ul></li><li><p><span>:q</span></p><ul><li><span>退出文件</span></li></ul></li><li><p><span>:wq</span></p><ul><li><span>保存并退出</span></li></ul></li><li><p><span>:q!</span></p><ul><li><span>强制退出 不做保存</span></li></ul></li><li><p><span>! 命令</span></p><ul><li><span>调用外部命令</span></li></ul></li></ul></li><li><p><span>查找/替换</span></p><ul><li><p><span>/ 关键词</span></p><ul><li><span>上一个结果 N</span></li><li><span>下一个结果 n</span></li></ul></li><li><p><span>:nohl</span></p><ul><li><span>取消高亮</span></li></ul></li><li><p><span>替换</span></p><ul><li><p><span>:s/搜索词/新内容</span></p><ul><li><span>替换光标所在行的第一处符合条件的内容</span></li></ul></li><li><p><span>:s/搜索词/新内容/g</span></p><ul><li><span>替换光标所在行全部符合条件的内容</span></li></ul></li><li><p><span>:%s/搜索词/新内容</span></p><ul><li><span>替换整个文档中每行第一个符合条件的内容</span></li></ul></li><li><p><span>:%s/搜索词/新内容/g</span></p><ul><li><span>替换整个文档符合条件的内容</span></li></ul></li></ul></li><li><p><span>:set nu</span></p><ul><li><span>显示行号（临时）</span></li><li><span>:set nonu 不显示行号</span></li></ul></li></ul></li><li><p><span>扩展，打开多个文件，如何切换</span></p><ul><li><p><span>:files</span></p><ul><li><span>查看已经打开的文件夹名称</span></li><li><span>状态%a  当前打开的文件</span></li><li><span>状态#  上一个打开的文件</span></li></ul></li><li><p><span>:open 文件名</span></p></li><li><p><span>:bn</span></p><ul><li><span>back next 下一个文件</span></li></ul></li><li><p><span>:bp</span></p><ul><li><span>back prev上一个文件</span></li></ul></li></ul></li></ul><h3><a name="扩展" class="md-header-anchor"></a><span>扩展</span></h3><ul><li><p><span>:syntax on</span></p><ul><li><span>代码着色 不着色为off</span></li></ul></li><li><p><span>计算器的使用</span></p><ul><li><span>a. 进入编辑模式</span>
<span>b. 按下按键“ctrl + R”，然后输入“=”，此时光标会变到最后一行</span>
<span>c. 输入需要计算的内容，按下回车</span></li></ul></li><li><p><span>配置</span></p><ul><li><p><span>在文件打开时在末行模式下输入配置（如：:set nu）</span></p></li><li><p><span>个人配置文件（~/.vimrc，如没有则新建即可）</span></p><ul><li><span>若个人配置和系统配置冲突，以个人配置为准</span></li></ul></li><li><p><span>全局配置文件（vim自带，/etc/vimrc）</span></p></li></ul></li><li><p><span>异常退出</span></p><ul><li><span>定义：在编辑文件后并没有正常的去wq，再次打开文件时会引发异常</span></li><li><span>解决方案：删除临时文件.wp，或按照提示操作即可</span></li></ul></li><li><p><span>别名机制</span></p><ul><li><p><span>定义</span></p><ul><li><span>创建一些属于自己的自定义命令，依赖~/.bashrc，添加alias mv=&#39;mv -i&#39;即可</span></li></ul></li><li><p><span>需重新登录当前用户</span></p></li></ul></li><li><p><span>:x 退出</span></p><ul><li><span>“:x”在文件没有修改的情况下，表示直接退出，在文件修改的情况下表示保存并退出</span></li><li><span>如果文件没有被修改，但是使用wq进行退出的话，则文件的修改时间会被更新；但是如果文件没有被修改，使用x进行退出的话，则文件修改时间不会被更新的；主要是会混淆用户对文件的修改时间的认定</span></li></ul></li><li><p><span>加密</span></p><ul><li><span>X</span></li></ul></li><li><p><span>解密</span></p><ul><li><span>X 不输入密码即可</span></li></ul></li></ul><h2><a name="自有服务1）" class="md-header-anchor"></a><span>自有服务（1）</span></h2><h3><a name="运行模式运行级别）" class="md-header-anchor"></a><span>运行模式（运行级别）</span></h3><ul><li><p><span>配置文件 /etc/inittab（版本不同，各有区别）</span></p></li><li><p><span>centos6.x</span></p><ul><li><p><span>0 — 表示关机级别（不要将默认的运行级别设置成这个值）</span>
<span>1 — 单用户模式</span>
<span>2 — 多用户模式，不带NFS（Network File Syetem）</span>
<span>3 — 多用户模式，完全的多用户模式（不带桌面的，纯命令行模式）</span>
<span>4 — 没有被使用的模式（被保留模式）</span>
<span>5 — X11，完整的图形化界面模式</span>
<span>6 — 表示重启级别（不要将默认的运行级别设置成这个值）</span></p></li><li><p><span>#init 0</span></p><ul><li><span>关机</span></li></ul></li><li><p><span>#init 3</span></p><ul><li><span>切换到命令行模式</span></li></ul></li><li><p><span>#init 5</span></p><ul><li><span>切换到桌面模式</span></li></ul></li><li><p><span>#init 6</span></p><ul><li><span>重启电脑</span></li></ul></li><li><p><span>设置模式永久为命令行模式</span></p><ul><li><span>修改inittab文件末行  id:3:initdefault:</span></li></ul></li></ul></li><li><p><span>centos7.x</span></p><ul><li><p><span>multi-user.target类似于runlevel 3</span></p></li><li><p><span>graphical.target类似于runlevel5</span></p></li><li><p><span>#systemctl get-default</span></p><ul><li><span>查看默认运行级别的方式</span></li></ul></li><li><p><span>#init n 仍可用</span></p><ul><li><span>0</span><span>	</span><span> shutdown.target</span>
<span>1</span><span>	</span><span> emergency.target</span>
<span>2</span><span>	</span><span> rescure.target</span>
<span>3</span><span>	</span><span> multi-user.target</span>
<span>4</span><span>	</span><span> 无</span>
<span>5</span><span>	</span><span> graphical.target</span>
<span>6</span><span>	</span><span> 无</span></li></ul></li><li><p><span>#systemctl set-default TARGET.target</span></p><ul><li><span>设置默认运行级别的方式</span></li></ul></li><li><p><span>#systemctl 【选项】【级别】</span></p><ul><li><span>systemctl get-default</span><span>				</span><span>获得当前的运行级别</span>
<span>systemctl set-default multi-user.target</span><span>	</span><span>设置默认的运行级别为mulit-user</span>
<span>systemctl isolate multi-user.target</span><span>		</span><span>在不重启的情况下，切换到运行级别mulit-user下</span>
<span>systemctl isolate graphical.target</span><span>		</span><span>在不重启的情况下，切换到图形界面下</span></li></ul></li></ul></li></ul><h2><a name="用户和用户组" class="md-header-anchor"></a><span>用户和用户组</span></h2><h3><a name="注意" class="md-header-anchor"></a><span>注意</span></h3><ul><li><span>用户名不可重复</span></li><li><span>/etc/passwd 存储用户信息  查看用户主组</span></li><li><span>/etc/group 存储用户组信息  查看附加组</span></li><li><span>/etc/shadow 存储用户密码信息</span></li></ul><h3><a name="用户操作" class="md-header-anchor"></a><span>用户操作</span></h3><ul><li><p><span>#user add 【选项】 用户名</span></p><ul><li><p><span>-g 用户主组 可以是用户组id，也可以是组名</span></p></li><li><p><span>-G 用户附加组 可以实用户组id，也可以是组名</span></p></li><li><p><span>-u uid（用户id标识），不指定的话系统默认从500之后按顺序分配uid</span></p></li><li><p><span>-c 注释</span></p></li><li><p><span>验证成功</span></p><ul><li><span>验证/etc/passwd的最后一行</span></li><li><span>验证是否存在同名家目录（centos）#ls /home</span></li><li><span>在不添加选项时执行useradd 会创建同名家目录，会创建同名用户组</span></li></ul></li><li><p><span>passwd文件</span></p><ul><li><span>user1</span>:x:<span>1001:1001::/home/user1:/bin/bash</span>
<span>用户名:密码:用户ID:用户组ID:注释:家目录:解释器shell</span></li><li><span>用户名：创建新用户名称，后期登录的时候需要输入；</span>
<span>密码：此密码位置一般情况都是“x”，表示密码的占位；</span>
<span>用户ID：用户的识别符；</span>
<span>用户组ID：该用户所属的主组ID；</span>
<span>注释：解释该用户是做什么用的；</span>
<span>家目录：用户登录进入系统之后默认的位置；</span>
<span>解释器shell：等待用户进入系统之后，用户输入指令之后，该解释器会收集用户输入的指令，传递给内核处理；</span></li></ul></li></ul></li><li><p><span>#usermod 【选项】 用户名</span></p><ul><li><p><span>-g 用户主组 可以是用户组id，也可以是组名</span></p></li><li><p><span>-G 用户附加组 可以实用户组id，也可以是组名</span></p></li><li><p><span>-u uid（用户id标识），不指定的话系统默认从500之后按顺序分配uid</span></p></li><li><p><span>-l 新用户名</span></p><ul><li><span>#usermod -l 新的用户名 旧的用户名</span></li></ul></li></ul></li><li><p><span>#passwd 用户名</span></p><ul><li><span>设置密码</span></li></ul></li><li><p><span>#su 【用户名】</span></p><ul><li><p><span>切换用户，用户名不指定则表示切换到root用户</span></p><ul><li><span>a. 从root往普通用户切换不需要密码，但是反之则需要root密码；</span>
<span>b. 切换用户之后前后的工作路径是不变的；</span>
<span>c. 普通用户没有办法访问root用户家目录，但是反之则可以；</span></li></ul></li></ul></li><li><p><span>#userdel 【选项】 用户名</span></p><ul><li><p><span>删除用户</span></p><ul><li><span>-r 删除用户时，同时删除家目录</span></li><li><span>已经登录的的用户要先结束此用户进程才可删除</span></li></ul></li></ul></li></ul><h3><a name="用户组操作" class="md-header-anchor"></a><span>用户组操作</span></h3><ul><li><p><span>文件结构</span></p><ul><li><span>geoclue</span>:x:<span>991:</span>
<span>用户组名:密码:用户组ID:组内用户名</span></li></ul></li><li><p><span>#groupadd 【选项】 用户组名</span></p><ul><li><span>-g 自定义组id，不指定则默认500之后递增</span></li></ul></li><li><p><span>#groupmod 【选项】 用户组名</span></p><ul><li><span>-g 自定义组id，不指定则默认500之后递增</span></li><li><span>-n 新用户组名</span></li></ul></li><li><p><span>#groupdel 用户组名</span></p><ul><li><span>若这个组时某个用户的主组，则不允许删除。要删除，先从组内移除所有用户</span></li></ul></li></ul><h2><a name="网络设置" class="md-header-anchor"></a><span>网络设置</span></h2><h3><a name="网卡配置文件路径" class="md-header-anchor"></a><span>网卡配置文件路径</span></h3><ul><li><p><span>/etc/sysconfig/network-scripts</span></p></li><li><p><span>命名格式：ifcfg-网卡名称</span></p></li><li><p><span>ifcfg-eth0（举例）</span></p><ul><li><span>TYPE=&quot;Ethernet&quot;</span>
<span>BOOTPROTO=&quot;dhcp&quot;    #ip地址分配方式，DHCP表示动态主机分配协议</span>
<span>DEFROUTE=&quot;yes&quot;</span>
<span>PEERDNS=&quot;yes&quot;</span>
<span>PEERROUTES=&quot;yes&quot;</span>
<span>IPV4_FAILURE_FATAL=&quot;no&quot;</span>
<span>IPV6INIT=&quot;yes&quot;</span>
<span>IPV6_AUTOCONF=&quot;yes&quot;</span>
<span>IPV6_DEFROUTE=&quot;yes&quot;</span>
<span>IPV6_PEERDNS=&quot;yes&quot;</span>
<span>IPV6_PEERROUTES=&quot;yes&quot;</span>
<span>IPV6_FAILURE_FATAL=&quot;no&quot;</span>
<span>IPV6_ADDR_GEN_MODE=&quot;stable-privacy&quot;</span>
<span>NAME=&quot;ens33&quot;</span>
<span>UUID=&quot;bb47ac5c-c613-4a71-87f2-1369029fc1d4&quot;</span>
<span>DEVICE=&quot;ens33&quot;</span>
<span>ONBOOT=&quot;yes&quot;   #是否开机启动</span></li></ul></li></ul><h3><a name="重启所有网卡" class="md-header-anchor"></a><span>重启所有网卡</span></h3><ul><li><span>#service network restart</span></li><li><span>#/etc/init.d/network restart</span></li></ul><h3><a name="扩展-n935" class="md-header-anchor"></a><span>扩展</span></h3><ul><li><p><span>#ln -s 原始路径 快捷方式路径</span></p><ul><li><p><span>软连接（快捷方式）（ls -l可查看详情，文件类型位置的“l”表示其类型为link（连接类型））</span></p><ul><li><span>ln -s /etc/sysconfig/network-scripts/ifcfg-ens33 ifcfg-ens33</span></li></ul></li></ul></li><li><p><span>#ifdown 网卡名</span></p><ul><li><span>停止单个网卡（慎用）</span></li></ul></li><li><p><span>#ifup 网卡名称</span></p><ul><li><span>启动单个网卡</span></li></ul></li></ul><h2><a name="ssh服务" class="md-header-anchor"></a><span>SSH服务</span></h2><h3><a name="服务启动停止重启" class="md-header-anchor"></a><span>服务启动/停止/重启</span></h3><ul><li><span>#service sshd start/stop/restart</span></li><li><span>#/etc/init.d/sshd start/stop/restart</span></li><li><span>默认端口22，在/etc/ssh/ssh_config可自定义修改</span></li></ul><h3><a name="远程终端" class="md-header-anchor"></a><span>远程终端 </span></h3><ul><li><span>Xshell</span></li><li><span>secureCRT</span></li><li><span>Putty小</span></li></ul><h3><a name="文件传输" class="md-header-anchor"></a><span>文件传输</span></h3><ul><li><span>Filezilla</span></li></ul><h2><a name="自有服务2" class="md-header-anchor"></a><span>自有服务2</span></h2><h3><a name="hostname-n977" class="md-header-anchor"></a><span>#hostname</span></h3><ul><li><p><span>-f FQDN（全限定域名）</span></p></li><li><p><span>设置主机名</span></p><ul><li><p><span>#hostname 新主机名</span></p><ul><li><span>临时设置主机名，切换用户后生效，重启后失效</span></li></ul></li><li><p><span>centos6.x</span></p><ul><li><p><span>主机名配置文件：/etc/sysconfig/network</span>
<span>修改其中的HOSTNAME为自己需要设置的永久主机名</span>
<span>修改linux服务器的hosts文件（/etc/hosts），将 新主机名 指向本地（设置FQDN）重启后生效</span></p><ul><li><p><span>为什么要设置FQDN</span></p><ul><li><span>很多开源服务器软件（例如Apache）则无法启动，或出现报错；</span>
<span>方便记忆，看到主机名对其作用有一个初步判断；</span>
<span>如果不设置则会影响本地的域名的解析（本地访问）；</span></li></ul></li></ul></li></ul></li><li><p><span>centos7.x</span></p><ul><li><p><span>修改/etc/hostname内容即可</span></p><ul><li><span>重启后生效，ping 新hostname 能通则表示成功</span></li></ul></li></ul></li></ul></li></ul><h3><a name="chkconfig" class="md-header-anchor"></a><span>#chkconfig </span></h3><ul><li><p><span>“开机启动项”管理服务</span></p><ul><li><p><span>--list 服务查询</span></p><ul><li><span>#chkconfig --list</span></li></ul></li><li><p><span>0-6 表示各个启动级别</span></p></li><li><p><span>--del </span></p><ul><li><span>#chkconfig --del 服务名</span></li></ul></li><li><p><span>--add</span></p><ul><li><span>#chkconfig --add 服务名   （必须保证服务正常运行，才可以添加）</span></li></ul></li><li><p><span>--level</span></p><ul><li><p><span>#chkconfig --level 级别名1【级别名2】  服务名 on/off</span></p><ul><li><span>设置服务在某个级别下开机启动/不启动</span></li></ul></li></ul></li></ul></li></ul><h3><a name="ntp服务" class="md-header-anchor"></a><span>ntp服务</span></h3><ul><li><p><span>对计算机的时间进行同步管理</span></p><ul><li><p><span>一次性同步</span></p><ul><li><span>操作之前先做个快照（方便下面设置时间同步服务的测试）</span></li><li><span>#ntpdate 时间服务器的域名或ip地址（</span><a href='http://www.ntp.org.cn/pool' target='_blank' class='url'>http://www.ntp.org.cn/pool</a><span>）</span></li><li><span>#ntpdate 120.25.115.20</span></li></ul></li><li><p><span>设置时间同步服务（启动ntpd服务）</span></p><ul><li><p><span>centos6.x</span></p><ul><li><span>#service ntpd start</span></li><li><span>设置ntpd服务开机启动</span>
<span>chkconfig --level 35 ntpd on</span></li></ul></li><li><p><span>centos7.x</span></p></li></ul></li></ul></li></ul><h3><a name="防火墙服务" class="md-header-anchor"></a><span>防火墙服务</span></h3><ul><li><p><span>centos6.x（iptables ）</span></p><ul><li><p><span>启动/关闭/重启（默认启动）</span></p><ul><li><span>#service iptables start/stop/restart</span></li></ul></li><li><p><span>查看状态（规则）</span></p><ul><li><span>#service iptables status</span></li></ul></li><li><p><span>查看规则命令</span></p><ul><li><p><span>#iptables -L -n</span></p><ul><li><span>-l 列出规则</span></li><li><span>-n 将单词表达形式改为数字显示</span></li></ul></li><li><p><span>#vim /etc/sysconfig/iptables</span></p><ul><li><p><span>开放80端口</span></p><ul><li><p><span>配置文件加入  -A RH-Firewall-1-INPUT -m state –state NEW -m tcp -p tcp –dport 80 -j ACCEPT</span></p></li><li><p><span>重启iptables</span></p><ul><li><span>#service iptables restart</span></li></ul></li></ul></li></ul></li></ul></li><li><p><span>简单设置防火墙</span></p><ul><li><p><span>#iptables -I INPUT -p tcp --dport 80 -j ACCEPT    #允许访问80端口</span>
<span>/etc/init.d/iptables save  #添加完后要保存</span></p><ul><li><span>Iptables：主命令</span>
<span>-I：表示将规则放到最前面</span>
<span>-A：add，添加规则（最后）</span>
<span>INPUT：进站请求【出站output】</span>
<span>-p：protocol，指定协议（icmp/tcp/udp）</span>
<span>--dport：指定端口号</span>
<span>-j：指定行为结果，允许（accept）/禁止（reject）/丢弃（drop）</span></li></ul></li></ul></li><li><p><span>用于过滤数据包，属于网络层防火墙</span></p></li></ul></li><li><p><span>centos7.x（firewaild）</span></p><ul><li><p><span>能够允许哪些服务可用，那些端口可用...属于更高一层的防火墙</span></p></li><li><p><span>centos7/redhat7已经默认使用firewalld作为防火墙，其使用的方式已经变化，基于iptables的防火墙默认不启用，但是仍可以继续使用</span>
<span>centos7/redhat7中有几种防火墙共存：firewalld、iptables、ebtablesd、默认使用的是firewalld作为防火墙，管理工具是firewalld</span></p></li><li><p><span>查看状态</span></p><ul><li><span>#systemctl status 【firewalld,iptables,ip6tables,ebtables】</span></li></ul></li><li><p><span>#firewall-cmd</span></p><ul><li><p><span>开启端口</span></p><ul><li><p><span>#firewall-cmd --zone=public --add-port=80/tcp --permanent</span></p><ul><li><span>--zone 作用域</span></li><li><span>--add-port 添加端口 格式:端口/通讯协议</span></li><li><span>--permanent 永久生效，无此参数，重启后失效</span></li></ul></li></ul></li><li><p><span>检测端口</span></p><ul><li><span>#firewall-cmd --query-port=80/tcp</span></li></ul></li><li><p><span>重启</span></p><ul><li><span>#firewall-cmd --reload</span></li></ul></li><li><p><span>列表</span></p><ul><li><span>#firewall-cmd --list-port</span></li></ul></li><li><p><span>关闭</span></p><ul><li><span>#systemctl stop firewalld.service</span></li></ul></li><li><p><span>禁止开机启动</span></p><ul><li><span>#systemctl disable firewalld.service</span></li></ul></li></ul></li><li><p><span>centos7与6的区别</span></p></li></ul></li></ul><h3><a name="rpm管理" class="md-header-anchor"></a><span>rpm管理</span></h3><ul><li><p><span>查询某个软件的安装情况</span></p><ul><li><h1><a name="rpm--qa-grep-yum" class="md-header-anchor"></a><span>rpm -qa |grep yum</span></h1></li><li><p><span>-q 查询</span></p></li><li><p><span>-a 全部</span></p></li></ul></li><li><p><span>#rpm -e 软件名称</span></p><ul><li><span>没有依赖关系可以直接卸载</span></li><li><span>当存在依赖关系的时候又不想去解决这个问题的时候可以：</span>
<span>#rpm -e 软件包名 --nodeps</span></li></ul></li><li><p><span>#lsblk </span></p><ul><li><p><span>查看块状设备信息</span></p><ul><li><span>Name：名称</span>
<span>Size：设备大小</span>
<span>Type：类型</span>
<span>MountPoint：挂载点（类似windows下盘符）</span></li></ul></li></ul></li><li><p><span>光盘挂在和解挂</span></p><ul><li><p><span>解挂</span></p><ul><li><span>#umount 当前设备的挂载点</span></li></ul></li><li><p><span>挂载</span></p><ul><li><span>#mount 设备原始地址 要挂在的位置路径</span></li><li><span>设备原始地址：/dev/名字（大小确定具体name值）</span></li><li><span>要挂在的位置路径：挂载目录一般在mnt下，以/mnt/dvd为例</span></li></ul></li></ul></li><li><p><span>#rpm -ivh 软件包完整名称</span></p><ul><li><span>安装软件</span></li><li><span>-i 安装</span></li><li><span>-v 显示进度</span></li><li><span>-h 表示已#的形式显示进度条</span></li></ul></li></ul><h3><a name="croncrontab计划任务" class="md-header-anchor"></a><span>cron/crontab计划任务</span></h3><ul><li><p><span>#crontab 【选项】</span></p><ul><li><span>-l 列出用户的计划任务列表</span></li><li><span>-e edit 编辑指定用户的计划任务列表</span></li><li><span>-u 指定用户名  不指定表示当前用户</span></li><li><span>-r remove 删除指定用户的计划任务列表</span></li></ul></li><li><p><span>编辑计划任务</span></p><ul><li><span>格式：行为单位，一行为一个计划（cron表达式 需要执行的命令）</span></li></ul></li><li><p><span>权限</span></p><ul><li><p><span>任何用户都可以创建自己的计划任务</span></p></li><li><p><span>黑名单配置不允许用户设置计划任务</span></p><ul><li><span>在/etc/cron.deny 添加用户名，一行一个</span></li></ul></li><li><p><span>白名单允许用户创建计划任务</span></p><ul><li><span>/etc/cron.allow（不存在则重建）一行有一个，当白名单和黑名单同时存在某用户，以白名单为准</span></li></ul></li></ul></li></ul><h2><a name="权限管理" class="md-header-anchor"></a><span>权限管理</span></h2><h3><a name="概述" class="md-header-anchor"></a><span>概述</span></h3><ul><li><p><span>权限操作与用户、用户组是兄弟操作</span></p></li><li><p><span>一般将文件可存/取访问的身份分为3个类别：owner、group、others，且3种身份各有read、write、execute等权限</span></p></li><li><p><span>读</span></p><ul><li><span>对于文件夹来说，读权限影响用户是否能够列出目录结构（#ls）</span></li><li><span>对于文件来说，读权限影响用户是否可以查看文件内容（vim、cat、tail、more、head）</span></li></ul></li><li><p><span>写</span></p><ul><li><span>对文件夹来说，写权限影响用户是否可以在文件夹下“创建/删除/复制到/移动到”文档（mkdir、touch、rm、cp、mv）</span></li><li><span>对于文件来说，写权限影响用户是否可以编辑文件内容（vim）</span></li></ul></li><li><p><span>执行</span></p><ul><li><span>一般都是对于文件来说，特别脚本文件，当文档拥有执行权限（任意部分），其颜色在终端是绿色的</span></li></ul></li><li><p><span>lrwxr-xr--</span></p><ul><li><span>l 文件类型为软连接，-表文件，d表目录，s表套接字</span></li><li><span>rwx 所有者拥有的权限  读写执行</span></li><li><span>r-x 同组用户拥有的权限 读执行</span></li><li><span>r-- 其他人拥有的权限 读，-表无权限</span></li></ul></li></ul><h3><a name="身份" class="md-header-anchor"></a><span>身份</span></h3><ul><li><p><span>Owner</span></p><ul><li><span>文件所有者，默认为文档的创建者</span></li></ul></li><li><p><span>Group</span></p><ul><li><span>与文件所有者同组的用户</span></li></ul></li><li><p><span>Others</span></p><ul><li><span>其他人，相对于所有者</span></li></ul></li><li><p><span>Root</span></p><ul><li><span>超级用户</span></li></ul></li></ul><h3><a name="chmod-选项-权限模式-文档" class="md-header-anchor"></a><span>#chmod 【选项】 权限模式 文档</span></h3><ul><li><p><span>如果想要给文档设置权限，操作者要么是root用户，要么就是文档的所有者</span></p></li><li><p><span>-r 递归，文件夹</span></p></li><li><p><span>字母形式</span></p><ul><li><span>用户</span>
<span>u 所有者</span>
<span>g 所属组</span>
<span>o 其他人</span>
<span>a 所有人</span></li><li><span>操作</span></li></ul></li></ul><ul><li><span>增加权限</span></li></ul><ul><li><p><span>减少权限</span>
<span>= 确定权限（直接赋值）</span></p><ul><li><span>权限</span>
<span>r  可读</span>
<span>w 可写</span>
<span>x  可执行</span></li></ul></li><li><p><span>无权限</span></p><ul><li><p><span>如果在设置权限的时候不指定给谁设置，则默认给所有用户设置</span></p></li><li><p><span>eg:#chmod u+x,g+rx,o+r aa.txt</span></p><ul><li><span>aa.txt（-rw-------.）设置权限，要求所有者拥有全部的权限，同组用户拥有读和执行权限，其他用户只读权限</span></li></ul></li></ul></li><li><p><span>数字形式（二进制&amp;的结果）</span></p><ul><li><span>r  4</span>
<span>w 2</span>
<span>x  1</span>
<span>无任何权限设为0即可</span></li><li><span>0 ---  0</span>
<span>1 --x  0+0+1</span>
<span>2 -w- 0+2+0</span>
<span>3 -wx 0+2+1</span>
<span>4 r--   4+0+0</span>
<span>5 r-x   4+0+1</span>
<span>6 rw-  4+2+0</span>
<span>7 rwx  4+2+1</span></li><li><span>在写权限的时候千万不要设置类似于上面的这种“奇葩权限”。如果一个权限数字中但凡出现2与3的数字，则该权限有不合理的情况</span></li><li><span>在Linux中，如果要删除一个文件，不是看文件有没有对应的权限，而是看文件所在的目录是否有写权限，如果有才可以删除</span></li><li><span>#chmod 775 aa.txt</span></li></ul></li></ul><h3><a name="属主和属组的设置" class="md-header-anchor"></a><span>属主和属组的设置</span></h3><ul><li><p><span>所属用户  所属用户组</span>
<span>root root</span></p></li><li><p><span>#chowm 【-R】 用户名 文档</span></p><ul><li><span>更改文档属主</span></li></ul></li><li><p><span>#chowm 【-R】 用户名:用户组 文档</span></p><ul><li><p><span>一次更改文档属主属组</span></p><ul><li><span>#chown -R loger:loger passwd</span></li></ul></li></ul></li><li><p><span>#chgrp 【-R】 用户组 文档（了解即可）</span></p><ul><li><span>更改文档属组</span></li></ul></li></ul><h3><a name="sudo" class="md-header-anchor"></a><span>sudo</span></h3><ul><li><p><span>管理员赋予普通用户执行管理员专属命令（reboot、shutdown、init、halt、user管理）</span></p></li><li><p><span>配置/etc/sudoers</span></p><ul><li><p><span>无法用vim直接编辑 使用#visudo进行编辑</span></p></li><li><p><span>root    ALL=(ALL)       ALL</span>
<span>Root表示用户名，如果是用户组，则可以写成“%组名”</span>
<span>ALL：表示允许登录的主机（地址白名单）</span>
<span>(ALL)：表示以谁的身份执行，ALL表示root身份</span>
<span>ALL：表示当前用户可以执行的命令，多个命令可以使用“,”分割</span></p></li><li><p><span>案例：本身test用户不能添加用户，要求使用sudo配置，将其设置为可以添加用户，并且可以修改密码（但是不能修改root用户密码）</span></p><ul><li><p><span>在写sudo规则的时候不建议写直接形式的命令，而是写命令的完整路径。</span>
<span>路径可以使用which命令来查看</span>
<span>语法：#which 指令名称</span></p></li><li><p><span>禁止修改root密码的配置（先允许全部，再拒绝root密码设置）</span></p><ul><li><span>/usr/bin/passwd [A-Za-z]*, !/usr/bin/passwd root</span></li></ul></li><li><p><span>loger   ALL=(ALL)       /usr/sbin/useradd,/usr/bin/passwd [A-za-z]*,!/us        r/bin/passwd root</span></p></li></ul></li><li><p><span>#sudo 需要执行的命令</span></p></li></ul></li><li><p><span>-l 在普通用户下查看自己有哪些sudo权限</span></p></li><li><p><span>sudo不是任何Linux分支都有的命令，常见centos与ubuntu都存在sudo命令</span></p></li></ul>
<div>
    <a href="./Linux.xmind" target="_blank">Linux.xmind思维导图</a><a href="./Linux.pdf" target="_blank" style="margin: 20px;">Linux.pdf</a><a href="./linuxHeima.doc" target="_blank">linux.doc</a>
    <span>近期在家看了一下关于linux的视频，通过老师的课件稍微整理了一下。视频是18年的，用的是Centos6.x，我整理下来发现有一些知识点由于Centos的升级而被“淘汰”，但大多还是可用的，至于有些出入的地方，还需重新寻求解决方案，后续我也会出个 <a href="https://logerlink.github.io/page/2021/ComparisonOfCentOS7And6.html">centos7和6的对比</a>。非常谢谢这位老师，也谢谢黑马，如有损害贵公司的任何相关利益，还请告知，多谢。</span>
</div>
</div>


</div>
</div>
</article>
</div>
</div>
</body>
</html>