<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
        <link rel="stylesheet" type="text/css" href="../../css/base.css"></link>
        <meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
        <title>SQL Server数据库，如何快速更新数据库表和字段的注释信息</title>
        <meta name="description" content="SQL Server数据库，如何快速更新数据库表和字段的注释信息,Mysql更新数据库表和字段的注释信息，EF迁移设置字段的注释信息">
        <link href='../../css/family.css' rel='stylesheet' type='text/css' />
        <script src="../../js/base.js" type="module"></script>
    </head>
    <body>
        <div class="container">
            <div class="col-left">
                <div class="wave"></div>
                <div class="category">
                </div>
            </div>
            <div class="col-right">
                <article>
                    <header>
                        <h1 class="title">
                            SQL Server数据库，如何快速更新数据库表和字段的注释信息
                        </h1>
                        <div class="dateTime">
                            2024-01-12
                        </div>
                    </header>
                    <hr/>
                    <div class="content">
<div class='typora-export os-windows' >
<div id='write'  class=''><div class='md-toc' mdtype='toc'><p class="md-toc-content" role="list"><span class="btn-toggle">&gt;</span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n2"><a class="md-toc-inner" href="#说明">说明</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n6"><a class="md-toc-inner" href="#手动更新注释">手动更新注释</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n12"><a class="md-toc-inner" href="#使用sql语句更新注释">使用SQL语句更新注释</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n15"><a class="md-toc-inner" href="#查看注释信息">查看注释信息</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n19"><a class="md-toc-inner" href="#增加注释信息">增加注释信息</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n25"><a class="md-toc-inner" href="#修改注释信息">修改注释信息</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n32"><a class="md-toc-inner" href="#删除注释信息">删除注释信息</a></span><span role="listitem" class="md-toc-item md-toc-h5" data-ref="n38"><a class="md-toc-inner" href="#快速更新数据库表和字段的注释信息">快速更新数据库表和字段的注释信息</a></span><span role="listitem" class="md-toc-item md-toc-h4" data-ref="n50"><a class="md-toc-inner" href="#ef迁移数据库时设置注释">EF迁移数据库时设置注释</a></span></p></div><h4 id='说明'><span>说明</span></h4><p><span>SQL Server数据库，如何快速更新数据库表和字段的注释信息？我们先看一下常规操作</span></p><p><span>题外话，MySql可以通过ALTER 语句更新注释，也可以在创建表或新增字段时直接在语句后面指定注释信息</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="sql"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="sql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51875px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><span><span>​</span>x</span></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 更新表注释</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">ALTER</span> <span class="cm-keyword">TABLE</span> test_db <span class="cm-keyword">COMMENT</span> <span class="cm-string">'表注释'</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 更新表注释</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">ALTER</span> <span class="cm-keyword">TABLE</span> test_db <span class="cm-keyword">MODIFY</span> <span class="cm-keyword">COLUMN</span> column1 <span class="cm-type">INT</span> <span class="cm-keyword">COMMENT</span> <span class="cm-string">'字段注释'</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 创建表时指定表注释</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">CREATE</span> <span class="cm-keyword">TABLE</span> test_db <span class="cm-bracket">(</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  column1 <span class="cm-type">INT</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  column2 <span class="cm-type">VARCHAR</span><span class="cm-bracket">(</span><span class="cm-number">50</span><span class="cm-bracket">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-bracket">)</span> <span class="cm-keyword">COMMENT</span> <span class="cm-operator">=</span> <span class="cm-string">'表注释'</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 新增字段时指定字段注释</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">ALTER</span> <span class="cm-keyword">TABLE</span> test_db <span class="cm-keyword">ADD</span> <span class="cm-keyword">COLUMN</span> column3 <span class="cm-type">INT</span> <span class="cm-keyword">COMMENT</span> <span class="cm-string">'字段注释'</span><span class="cm-punctuation">;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 276px;"></div><div class="CodeMirror-gutters" style="display: none; height: 276px;"></div></div></div></pre><h4 id='手动更新注释'><span>手动更新注释</span></h4><p><span>对注释进行</span><strong><span>增删改查</span></strong><span>都可以在此页面进行</span></p><p><span>数据库表【右键】选择设计</span></p><p><img src="https://gcore.jsdelivr.net/gh/logerlink/blogImg/typora-img/2024/image-20240111163511806.png" referrerpolicy="no-referrer" alt="image-20240111163511806"></p><p><span>选择列，修改【说明】属性，然后保存即可</span></p><p><img src="https://gcore.jsdelivr.net/gh/logerlink/blogImg/typora-img/2024/image-20240111163646378.png" referrerpolicy="no-referrer" alt="image-20240111163646378"></p><h4 id='使用sql语句更新注释'><span>使用SQL语句更新注释</span></h4><p><span>我们可以借助以下存储过程来对注释进行增删改查 。</span></p><p><span>注意，以下存储过程中的表名、字段名不能用[]包起来、不区分大小写</span></p><h5 id='查看注释信息'><span>查看注释信息</span></h5><p><a href='https://learn.microsoft.com/en-us/sql/relational-databases/system-catalog-views/extended-properties-catalog-views-sys-extended-properties?view=sql-server-ver16'><span>extended_properties</span></a><span> 查看注释信息</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="sql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="sql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51875px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-bracket">(</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 查看字段注释</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">SELECT</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  t<span class="cm-variable-2">.name</span> <span class="cm-keyword">AS</span> TableName<span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  c<span class="cm-variable-2">.name</span> <span class="cm-keyword">AS</span> ColumnName<span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ep<span class="cm-variable-2">.value</span> <span class="cm-keyword">AS</span> <span class="cm-keyword">Comment</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">FROM</span> sys<span class="cm-variable-2">.tables</span> t</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">INNER</span> <span class="cm-keyword">JOIN</span> sys<span class="cm-variable-2">.columns</span> c <span class="cm-keyword">ON</span> c<span class="cm-variable-2">.object_id</span> <span class="cm-operator">=</span> t<span class="cm-variable-2">.object_id</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">LEFT</span> <span class="cm-keyword">JOIN</span> sys<span class="cm-variable-2">.extended_properties</span> ep <span class="cm-keyword">ON</span> ep<span class="cm-variable-2">.major_id</span> <span class="cm-operator">=</span> c<span class="cm-variable-2">.object_id</span> <span class="cm-keyword">AND</span> ep<span class="cm-variable-2">.minor_id</span> <span class="cm-operator">=</span> c<span class="cm-variable-2">.column_id</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">WHERE</span> ep<span class="cm-variable-2">.class</span> <span class="cm-operator">=</span> <span class="cm-number">1</span> <span class="cm-comment">-- 表或视图的扩展属性</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">AND</span> ep<span class="cm-variable-2">.name</span> <span class="cm-operator">=</span> <span class="cm-string">'MS_Description'</span> <span class="cm-comment">-- 注释的名称</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">AND</span> OBJECT_NAME<span class="cm-bracket">(</span>ep<span class="cm-variable-2">.major_id</span><span class="cm-bracket">)</span> <span class="cm-operator">=</span> <span class="cm-string">'User_TradeInfo'</span> <span class="cm-comment">-- 替换为你的表名</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-bracket">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">union</span><span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-comment">-- 使用union合成一张表</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-bracket">(</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 查看表注释</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">SELECT</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  t<span class="cm-variable-2">.name</span> <span class="cm-keyword">AS</span> TableName<span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-atom">null</span> <span class="cm-keyword">as</span> ColumnName<span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ep<span class="cm-variable-2">.value</span> <span class="cm-keyword">AS</span> TableComment</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">FROM</span> sys<span class="cm-variable-2">.tables</span> t</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">LEFT</span> <span class="cm-keyword">JOIN</span> sys<span class="cm-variable-2">.extended_properties</span> ep <span class="cm-keyword">ON</span> ep<span class="cm-variable-2">.major_id</span> <span class="cm-operator">=</span> t<span class="cm-variable-2">.object_id</span> <span class="cm-keyword">AND</span> ep<span class="cm-variable-2">.minor_id</span> <span class="cm-operator">=</span> <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">WHERE</span> ep<span class="cm-variable-2">.class</span> <span class="cm-operator">=</span> <span class="cm-number">1</span> <span class="cm-comment">-- 表或视图的扩展属性</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">AND</span> ep<span class="cm-variable-2">.name</span> <span class="cm-operator">=</span> <span class="cm-string">'MS_Description'</span> <span class="cm-comment">-- 注释的名称</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">AND</span> OBJECT_NAME<span class="cm-bracket">(</span>ep<span class="cm-variable-2">.major_id</span><span class="cm-bracket">)</span> <span class="cm-operator">=</span> <span class="cm-string">'User_TradeInfo'</span> <span class="cm-comment">-- 替换为你的表名</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-bracket">)</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 599px;"></div><div class="CodeMirror-gutters" style="display: none; height: 599px;"></div></div></div></pre><p><img src="https://gcore.jsdelivr.net/gh/logerlink/blogImg/typora-img/2024/image-20240112095444223.png" referrerpolicy="no-referrer" alt="image-20240112095444223"></p><h5 id='增加注释信息'><span>增加注释信息</span></h5><p><a href='https://learn.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/sp-addextendedproperty-transact-sql?view=sql-server-ver16'><span>sp_addextendedproperty</span></a><span> 增加注释信息</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="sql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="sql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51875px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">use</span> test<span class="cm-punctuation">;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 给表【User_TradeInfo】的字段【Frzamt】增加注释信息</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">EXEC sys<span class="cm-variable-2">.sp_addextendedproperty</span> <span class="cm-variable-2">@name</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'MS_Description'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-variable-2">@value</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'字段的注释信息'</span><span class="cm-punctuation">,</span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level0type</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'SCHEMA'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level0name</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'dbo'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level1type</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'TABLE'</span><span class="cm-punctuation">,</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level1name</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'User_TradeInfo'</span><span class="cm-punctuation">,</span> <span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-comment">-- 表名</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level2type</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'COLUMN'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level2name</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'Frzamt'</span><span class="cm-punctuation">;</span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 字段名</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 给表【User_TradeInfo】增加注释信息,不指定字段</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">EXEC sys<span class="cm-variable-2">.sp_addextendedproperty</span> <span class="cm-variable-2">@name</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'MS_Description'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-variable-2">@value</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'表的注释信息'</span><span class="cm-punctuation">,</span><span class="cm-tab" role="presentation" cm-text="	"> </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level0type</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'SCHEMA'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level0name</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'dbo'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level1type</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'TABLE'</span><span class="cm-punctuation">,</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level1name</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'User_TradeInfo'</span><span class="cm-punctuation">;</span> <span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-comment">-- 表名</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 438px;"></div><div class="CodeMirror-gutters" style="display: none; height: 438px;"></div></div></div></pre><p><span>若该字段或表存在注释信息时，执行 sp_addextendedproperty 会报错：</span><span style="color:red;"><span>无法添加属性。&#39;dbo.User_TradeInfo.Frzamt&#39; 已存在属性 &#39;MS_Description&#39;。</span></span></p><p><span>如果我们要修改注释信息，则应该使用 sp_updateextendedproperty 修改注释信息，或者先删除，再增加注释信息</span></p><p><img src="https://gcore.jsdelivr.net/gh/logerlink/blogImg/typora-img/2024/image-20240111172449599.png" referrerpolicy="no-referrer" alt="image-20240111172449599"></p><h5 id='修改注释信息'><span>修改注释信息</span></h5><p><a href='https://learn.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/sp-updateextendedproperty-transact-sql?view=sql-server-ver16'><span>sp_updateextendedproperty</span></a><span> 修改注释信息</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="sql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="sql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51875px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">use</span> test<span class="cm-punctuation">;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 给表【User_TradeInfo】的字段【Frzamt】修改注释信息</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">EXEC sys<span class="cm-variable-2">.sp_updateextendedproperty</span> &nbsp;<span class="cm-variable-2">@name</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'MS_Description'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-variable-2">@value</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'字段的注释信息11111'</span><span class="cm-punctuation">,</span><span class="cm-tab" role="presentation" cm-text="	">   </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level0type</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'SCHEMA'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level0name</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'dbo'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level1type</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'TABLE'</span><span class="cm-punctuation">,</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level1name</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'User_TradeInfo'</span><span class="cm-punctuation">,</span> <span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-comment">-- 表名</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level2type</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'COLUMN'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level2name</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'Frzamt'</span><span class="cm-punctuation">;</span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 字段名</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 给表【User_TradeInfo】修改注释信息,不指定字段</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">EXEC sys<span class="cm-variable-2">.sp_updateextendedproperty</span> &nbsp;<span class="cm-variable-2">@name</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'MS_Description'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-variable-2">@value</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'表的注释信息22222'</span><span class="cm-punctuation">,</span><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level0type</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'SCHEMA'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level0name</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'dbo'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level1type</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'TABLE'</span><span class="cm-punctuation">,</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level1name</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'User_TradeInfo'</span><span class="cm-punctuation">;</span> <span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-comment">-- 表名</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 438px;"></div><div class="CodeMirror-gutters" style="display: none; height: 438px;"></div></div></div></pre><p><img src="https://gcore.jsdelivr.net/gh/logerlink/blogImg/typora-img/2024/image-20240112095555114.png" referrerpolicy="no-referrer" alt="image-20240112095555114"></p><p><span>若该字段或表不存在注释信息时，执行 sp_updateextendedproperty 会报错：</span><span style="color:red;"><span>无法更新或删除属性。&#39;dbo.User_TradeInfo.CreateStaffId&#39; 不存在属性 &#39;MS_Description&#39;。</span></span></p><p><img src="https://gcore.jsdelivr.net/gh/logerlink/blogImg/typora-img/2024/image-20240111173118877.png" referrerpolicy="no-referrer" alt="image-20240111173118877"></p><p><span>如果我们要增加注释信息，则应该使用 sp_addextendedproperty 修改注释信息</span></p><h5 id='删除注释信息'><span>删除注释信息</span></h5><p><a href='https://learn.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/sp-dropextendedproperty-transact-sql?view=sql-server-ver16'><span>sp_dropextendedproperty</span></a><span> 删除注释信息，注意没有@value参数</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="sql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="sql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51875px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">use</span> test<span class="cm-punctuation">;</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 给表【User_TradeInfo】的字段【Frzamt】删除注释信息</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">EXEC sys<span class="cm-variable-2">.sp_dropextendedproperty</span> &nbsp;<span class="cm-variable-2">@name</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'MS_Description'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level0type</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'SCHEMA'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level0name</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'dbo'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level1type</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'TABLE'</span><span class="cm-punctuation">,</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level1name</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'User_TradeInfo'</span><span class="cm-punctuation">,</span> <span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-comment">-- 表名</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level2type</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'COLUMN'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level2name</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'Frzamt'</span><span class="cm-punctuation">;</span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 字段名</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 给表【User_TradeInfo】删除注释信息,不指定字段</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">EXEC sys<span class="cm-variable-2">.sp_dropextendedproperty</span> &nbsp;<span class="cm-variable-2">@name</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'MS_Description'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level0type</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'SCHEMA'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level0name</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'dbo'</span><span class="cm-punctuation">,</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level1type</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'TABLE'</span><span class="cm-punctuation">,</span> </span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-variable-2">@level1name</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'User_TradeInfo'</span><span class="cm-punctuation">;</span> <span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-comment">-- 表名</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 392px;"></div><div class="CodeMirror-gutters" style="display: none; height: 392px;"></div></div></div></pre><p><img src="https://gcore.jsdelivr.net/gh/logerlink/blogImg/typora-img/2024/image-20240112095645188.png" referrerpolicy="no-referrer" alt="image-20240112095645188"></p><p><span>若该字段或表不存在注释信息时，执行 sp_addextendedproperty 会报错：</span><span style="color:red;"><span>无法更新或删除属性。&#39;dbo.User_TradeInfo.Frzamt&#39; 不存在属性 &#39;MS_Description&#39;。</span></span></p><p><img src="https://gcore.jsdelivr.net/gh/logerlink/blogImg/typora-img/2024/image-20240111173713043.png" referrerpolicy="no-referrer" alt="image-20240111173713043"></p><h5 id='快速更新数据库表和字段的注释信息'><span>快速更新数据库表和字段的注释信息</span></h5><p><span>借助循环生成语句，快速更新数据库表和字段的注释信息</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="sql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="sql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51875px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">DECLARE</span> <span class="cm-variable-2">@TableName</span> NVARCHAR<span class="cm-bracket">(</span><span class="cm-number">128</span><span class="cm-bracket">)</span> <span class="cm-operator">=</span> <span class="cm-string">'User_TradeInfo'</span><span class="cm-punctuation">;</span> <span class="cm-comment">-- 替换为你的表名</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">DECLARE</span> <span class="cm-variable-2">@ColumnName</span> NVARCHAR<span class="cm-bracket">(</span><span class="cm-number">128</span><span class="cm-bracket">)</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">DECLARE</span> <span class="cm-variable-2">@SQL</span> NVARCHAR<span class="cm-bracket">(</span><span class="cm-keyword">MAX</span><span class="cm-bracket">)</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">DECLARE</span> <span class="cm-variable-2">@SQLAction</span> NVARCHAR<span class="cm-bracket">(</span><span class="cm-keyword">MAX</span><span class="cm-bracket">)</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">DECLARE</span> ColumnCursor <span class="cm-keyword">CURSOR</span> <span class="cm-keyword">FOR</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">SELECT</span> COLUMN_NAME</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">FROM</span> INFORMATION_SCHEMA<span class="cm-variable-2">.COLUMNS</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">WHERE</span> <span class="cm-keyword">TABLE_NAME</span> <span class="cm-operator">=</span> <span class="cm-variable-2">@TableName</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">OPEN</span> ColumnCursor<span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">FETCH</span> <span class="cm-keyword">NEXT</span> <span class="cm-keyword">FROM</span> ColumnCursor <span class="cm-keyword">INTO</span> <span class="cm-variable-2">@ColumnName</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 增加表注释（未判断是否存在，自行看一下是否存在，存在的话add改成update即可）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">PRINT</span> <span class="cm-keyword">N</span><span class="cm-string">'EXEC  sys.sp_addextendedproperty @name = N''MS_Description'',@value = N''表注释'',@level0type = N''SCHEMA'',@level0name = N''dbo'',@level1type = N''TABLE'',@level1name = N'''</span> <span class="cm-operator">+</span> <span class="cm-variable-2">@TableName</span> <span class="cm-operator">+</span> <span class="cm-keyword">N</span><span class="cm-string">''';'</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">WHILE</span> <span class="cm-variable-2">@@FETCH_STATUS</span> <span class="cm-operator">=</span> <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">BEGIN</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> <span class="cm-bracket">(</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">SELECT</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">FROM</span> sys<span class="cm-variable-2">.extended_properties</span> ep</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">INNER</span> <span class="cm-keyword">JOIN</span> sys<span class="cm-variable-2">.columns</span> c <span class="cm-keyword">ON</span> ep<span class="cm-variable-2">.major_id</span> <span class="cm-operator">=</span> c<span class="cm-variable-2">.object_id</span> <span class="cm-keyword">AND</span> ep<span class="cm-variable-2">.minor_id</span> <span class="cm-operator">=</span> c<span class="cm-variable-2">.column_id</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">WHERE</span> ep<span class="cm-variable-2">.class</span> <span class="cm-operator">=</span> <span class="cm-number">1</span> <span class="cm-comment">-- 表或视图的扩展属性</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">AND</span> ep<span class="cm-variable-2">.name</span> <span class="cm-operator">=</span> <span class="cm-string">'MS_Description'</span> <span class="cm-comment">-- 注释的名称</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">AND</span> OBJECT_NAME<span class="cm-bracket">(</span>ep<span class="cm-variable-2">.major_id</span><span class="cm-bracket">)</span> <span class="cm-operator">=</span> <span class="cm-variable-2">@TableName</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">AND</span> c<span class="cm-variable-2">.name</span> <span class="cm-operator">=</span> <span class="cm-variable-2">@ColumnName</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-bracket">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">BEGIN</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">SET</span> <span class="cm-variable-2">@SQLAction</span> <span class="cm-operator">=</span> <span class="cm-string">'sys.sp_updateextendedproperty'</span><span class="cm-punctuation">;</span><span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-comment">-- 若存在注释则改为修改注释</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">END</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">ELSE</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">BEGIN</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">SET</span> <span class="cm-variable-2">@SQLAction</span> <span class="cm-operator">=</span> <span class="cm-string">'sys.sp_addextendedproperty'</span><span class="cm-punctuation">;</span><span class="cm-tab" role="presentation" cm-text="	">  </span><span class="cm-comment">-- 若不存在注释则改为增加注释</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">END</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">SET</span> <span class="cm-variable-2">@SQL</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'EXEC  '</span> <span class="cm-operator">+</span> <span class="cm-variable-2">@SQLAction</span> <span class="cm-operator">+</span> <span class="cm-string">' @name = N''MS_Description'',@value = N'''</span> <span class="cm-operator">+</span> <span class="cm-variable-2">@ColumnName</span> <span class="cm-operator">+</span> <span class="cm-keyword">N</span><span class="cm-string">'注释'',@level0type = N''SCHEMA'',@level0name = N''dbo'',@level1type = N''TABLE'',@level1name = N'''</span> <span class="cm-operator">+</span> <span class="cm-variable-2">@TableName</span> <span class="cm-operator">+</span> <span class="cm-keyword">N</span><span class="cm-string">''',@level2type = N''COLUMN'',@level2name = N'''</span> <span class="cm-operator">+</span> <span class="cm-variable-2">@ColumnName</span> <span class="cm-operator">+</span> <span class="cm-keyword">N</span><span class="cm-string">''';'</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-builtin">PRINT</span> <span class="cm-variable-2">@SQL</span><span class="cm-punctuation">;</span> <span class="cm-comment">-- 打印存储过程调用语句</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">FETCH</span> <span class="cm-keyword">NEXT</span> <span class="cm-keyword">FROM</span> ColumnCursor <span class="cm-keyword">INTO</span> <span class="cm-variable-2">@ColumnName</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">END</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">CLOSE</span> ColumnCursor<span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">DEALLOCATE</span> ColumnCursor<span class="cm-punctuation">;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 1106px;"></div><div class="CodeMirror-gutters" style="display: none; height: 1106px;"></div></div></div></pre><p><img src="https://gcore.jsdelivr.net/gh/logerlink/blogImg/typora-img/2024/image-20240111191709441.png" referrerpolicy="no-referrer" alt="image-20240111191709441"></p><p><span>执行以上SQL语句，一键生成后，我们只要修改字段相应的注释信息，接着执行这些语句，就可以快速更新字段和表的注释信息了</span></p><p><img src="https://gcore.jsdelivr.net/gh/logerlink/blogImg/typora-img/2024/image-20240112100546709.png" referrerpolicy="no-referrer" alt="image-20240112100546709"></p><p><span>同理我还可以快速删除表和字段的注释信息</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="sql" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="sql"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51875px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">DECLARE</span> <span class="cm-variable-2">@TableName</span> NVARCHAR<span class="cm-bracket">(</span><span class="cm-number">128</span><span class="cm-bracket">)</span> <span class="cm-operator">=</span> <span class="cm-string">'User_TradeInfo'</span><span class="cm-punctuation">;</span> <span class="cm-comment">-- 替换为你的表名</span></span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">DECLARE</span> <span class="cm-variable-2">@ColumnName</span> NVARCHAR<span class="cm-bracket">(</span><span class="cm-number">128</span><span class="cm-bracket">)</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">DECLARE</span> <span class="cm-variable-2">@SQL</span> NVARCHAR<span class="cm-bracket">(</span><span class="cm-keyword">MAX</span><span class="cm-bracket">)</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">DECLARE</span> <span class="cm-variable-2">@SQLAction</span> NVARCHAR<span class="cm-bracket">(</span><span class="cm-keyword">MAX</span><span class="cm-bracket">)</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">DECLARE</span> ColumnCursor <span class="cm-keyword">CURSOR</span> <span class="cm-keyword">FOR</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">SELECT</span> COLUMN_NAME</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">FROM</span> INFORMATION_SCHEMA<span class="cm-variable-2">.COLUMNS</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">WHERE</span> <span class="cm-keyword">TABLE_NAME</span> <span class="cm-operator">=</span> <span class="cm-variable-2">@TableName</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">OPEN</span> ColumnCursor<span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">FETCH</span> <span class="cm-keyword">NEXT</span> <span class="cm-keyword">FROM</span> ColumnCursor <span class="cm-keyword">INTO</span> <span class="cm-variable-2">@ColumnName</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-comment">-- 删除表注释（未判断是否存在注释，自行看一下是否存在，不存在的话把这条命令注释掉不执行即可）</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-builtin">PRINT</span> <span class="cm-keyword">N</span><span class="cm-string">'EXEC sys.sp_dropextendedproperty @name = N''MS_Description'',@level0type = N''SCHEMA'',@level0name = N''dbo'',@level1type = N''TABLE'',@level1name = N'''</span> <span class="cm-operator">+</span> <span class="cm-variable-2">@TableName</span> <span class="cm-operator">+</span> <span class="cm-keyword">N</span><span class="cm-string">''';'</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">WHILE</span> <span class="cm-variable-2">@@FETCH_STATUS</span> <span class="cm-operator">=</span> <span class="cm-number">0</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">BEGIN</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" class="cm-tab-wrap-hack" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">IF</span> <span class="cm-keyword">EXISTS</span> <span class="cm-bracket">(</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">SELECT</span> <span class="cm-number">1</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">FROM</span> sys<span class="cm-variable-2">.extended_properties</span> ep</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">INNER</span> <span class="cm-keyword">JOIN</span> sys<span class="cm-variable-2">.columns</span> c <span class="cm-keyword">ON</span> ep<span class="cm-variable-2">.major_id</span> <span class="cm-operator">=</span> c<span class="cm-variable-2">.object_id</span> <span class="cm-keyword">AND</span> ep<span class="cm-variable-2">.minor_id</span> <span class="cm-operator">=</span> c<span class="cm-variable-2">.column_id</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">WHERE</span> ep<span class="cm-variable-2">.class</span> <span class="cm-operator">=</span> <span class="cm-number">1</span> <span class="cm-comment">-- 表或视图的扩展属性</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">AND</span> ep<span class="cm-variable-2">.name</span> <span class="cm-operator">=</span> <span class="cm-string">'MS_Description'</span> <span class="cm-comment">-- 注释的名称</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">AND</span> OBJECT_NAME<span class="cm-bracket">(</span>ep<span class="cm-variable-2">.major_id</span><span class="cm-bracket">)</span> <span class="cm-operator">=</span> <span class="cm-variable-2">@TableName</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">AND</span> c<span class="cm-variable-2">.name</span> <span class="cm-operator">=</span> <span class="cm-variable-2">@ColumnName</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-bracket">)</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">BEGIN</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-comment">-- 若存在注释则删除注释，不存在则不处理</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">SET</span> <span class="cm-variable-2">@SQL</span> <span class="cm-operator">=</span> <span class="cm-keyword">N</span><span class="cm-string">'EXEC sys.sp_dropextendedproperty @name = N''MS_Description'',@level0type = N''SCHEMA'',@level0name = N''dbo'',@level1type = N''TABLE'',@level1name = N'''</span> <span class="cm-operator">+</span> <span class="cm-variable-2">@TableName</span> <span class="cm-operator">+</span> <span class="cm-keyword">N</span><span class="cm-string">''',@level2type = N''COLUMN'',@level2name = N'''</span> <span class="cm-operator">+</span> <span class="cm-variable-2">@ColumnName</span> <span class="cm-operator">+</span> <span class="cm-keyword">N</span><span class="cm-string">''';'</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-builtin">PRINT</span> <span class="cm-variable-2">@SQL</span><span class="cm-punctuation">;</span> <span class="cm-comment">-- 打印存储过程调用语句</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-tab" role="presentation" cm-text="	">    </span><span class="cm-keyword">END</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-keyword">FETCH</span> <span class="cm-keyword">NEXT</span> <span class="cm-keyword">FROM</span> ColumnCursor <span class="cm-keyword">INTO</span> <span class="cm-variable-2">@ColumnName</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">END</span><span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">CLOSE</span> ColumnCursor<span class="cm-punctuation">;</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">DEALLOCATE</span> ColumnCursor<span class="cm-punctuation">;</span></span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 968px;"></div><div class="CodeMirror-gutters" style="display: none; height: 968px;"></div></div></div></pre><p><span>执行以上SQL语句，一键生成后，执行这些语句，就可以快速删除字段和表的注释信息了</span></p><p><img src="https://gcore.jsdelivr.net/gh/logerlink/blogImg/typora-img/2024/image-20240111195647309.png" referrerpolicy="no-referrer" alt="image-20240111195647309"></p><p><span>虽然还是需要我们一个一个复制注释信息，但是这样复制会比较快，尤其适用于迁移（已存在的注释的话，可以右键数据库表生成create DDL语句，也可以拿到这些注释命令）</span></p><p><img src="https://gcore.jsdelivr.net/gh/logerlink/blogImg/typora-img/2024/image-20240111200530251.png" referrerpolicy="no-referrer" alt="image-20240111200530251"></p><h4 id='ef迁移数据库时设置注释'><span>EF迁移数据库时设置注释</span></h4><p><span>我们还可以修改 </span><code>Add-Migration ...</code><span> 生成后的代码，帮助我们设置注释</span></p><pre class="md-fences md-end-block ty-contain-cm modeLoaded" spellcheck="false" lang="csharp" style="break-inside: unset;"><div class="CodeMirror cm-s-inner cm-s-null-scroll CodeMirror-wrap" lang="csharp"><div style="overflow: hidden; position: relative; width: 3px; height: 0px; top: 9.51875px; left: 8px;"><textarea autocorrect="off" autocapitalize="off" spellcheck="false" tabindex="0" style="position: absolute; bottom: -1em; padding: 0px; width: 1000px; height: 1em; outline: none;"></textarea></div><div class="CodeMirror-scrollbar-filler" cm-not-content="true"></div><div class="CodeMirror-gutter-filler" cm-not-content="true"></div><div class="CodeMirror-scroll" tabindex="-1"><div class="CodeMirror-sizer" style="margin-left: 0px; margin-bottom: 0px; border-right-width: 0px; padding-right: 0px; padding-bottom: 0px;"><div style="position: relative; top: 0px;"><div class="CodeMirror-lines" role="presentation"><div role="presentation" style="position: relative; outline: none;"><div class="CodeMirror-measure"><pre><span>xxxxxxxxxx</span></pre></div><div class="CodeMirror-measure"></div><div style="position: relative; z-index: 1;"></div><div class="CodeMirror-code" role="presentation" style=""><div class="CodeMirror-activeline" style="position: relative;"><div class="CodeMirror-activeline-background CodeMirror-linebackground"></div><div class="CodeMirror-gutter-background CodeMirror-activeline-gutter" style="left: 0px; width: 0px;"></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span class="cm-keyword">protected</span> <span class="cm-keyword">override</span> <span class="cm-keyword">void</span> <span class="cm-variable">Up</span>(<span class="cm-variable">MigrationBuilder</span> <span class="cm-variable">migrationBuilder</span>)</span></pre></div><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">{</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">migrationBuilder</span>.<span class="cm-variable">AddColumn</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">bool</span><span class="cm-operator">&gt;</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">name</span>: <span class="cm-string">"IsAllow"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">table</span>: <span class="cm-string">"User_TradeInfo"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">nullable</span>: <span class="cm-atom">true</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">comment</span>: <span class="cm-string">"是否允许"</span>);<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-operator">--</span> <span class="cm-variable">设置注释，生成的代码默认没有comment参数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"><span cm-text="" cm-zwsp="">
</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp;<span class="cm-variable">migrationBuilder</span>.<span class="cm-variable">AddColumn</span><span class="cm-operator">&lt;</span><span class="cm-variable-3">bool</span><span class="cm-operator">&gt;</span>(</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">name</span>: <span class="cm-string">"IsPub"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">table</span>: <span class="cm-string">"User_TradeInfo"</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">nullable</span>: <span class="cm-atom">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">defaultValue</span>: <span class="cm-atom">false</span>,</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp; &nbsp; &nbsp; &nbsp;<span class="cm-variable">comment</span>: <span class="cm-string">"是否发布"</span>);<span class="cm-tab" role="presentation" cm-text="	">   </span><span class="cm-operator">--</span> <span class="cm-variable">设置注释，生成的代码默认没有comment参数</span></span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;"> &nbsp;  ...</span></pre><pre class=" CodeMirror-line " role="presentation"><span role="presentation" style="padding-right: 0.1px;">}</span></pre></div></div></div></div></div><div style="position: absolute; height: 0px; width: 1px; border-bottom: 0px solid transparent; top: 369px;"></div><div class="CodeMirror-gutters" style="display: none; height: 369px;"></div></div></div></pre><p><span>更新数据库后，当我们使用 </span><code>Script-Migration ...</code><span> 生成迁移脚本时，也会自动帮我们把注释信息加上</span></p><p><img src="https://gcore.jsdelivr.net/gh/logerlink/blogImg/typora-img/2024/image-20240112105933745.png" referrerpolicy="no-referrer" alt="image-20240112105933745"></p></div></div>

</div>
</div>
</article>
</div>
<div class="btn-toTop"></div>
</div>
</body>

</html>